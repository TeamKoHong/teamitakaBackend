openapi: 3.0.0
info:
  title: Teamitaka Backend API
  version: 1.0.0
  description: |
    Teamitaka 백엔드 API 문서
    
    ## 인증
    대부분의 API는 JWT 토큰이 필요합니다. 로그인 후 받은 토큰을 Authorization 헤더에 포함시켜 주세요.
    
    ```
    Authorization: Bearer <your-jwt-token>
    ```
    
    ## 주요 기능
    - 사용자 인증 및 관리
    - 모집공고 관리
    - 프로젝트 관리
    - 지원 및 리뷰 시스템
    - 대학 인증 시스템
    
    ## 개발 환경
    - 로컬 개발: http://localhost:3000
    - 프로덕션: https://teamitaka-backend-zwe2nuc5ga-uc.a.run.app
    
    ## API 문서 접근
    - Swagger UI: `/api-docs`
    - JSON 형식: `/api-docs/swagger.json`
    
tags:
  - name: 인증
    description: 사용자 로그인, 회원가입, 인증 관련 API
  - name: 관리자
    description: 관리자 전용 기능 API
  - name: 사용자
    description: 사용자 정보 관리 API
  - name: 모집공고
    description: 모집공고 작성, 조회, 수정 API
  - name: 지원
    description: 모집공고 지원 관련 API
  - name: 프로젝트
    description: 프로젝트 관리 API
  - name: 리뷰
    description: 팀원 간 리뷰 시스템 API
  - name: 댓글
    description: 댓글 작성, 조회 API
  - name: 검색
    description: 검색 기능 API
  - name: 프로필
    description: 사용자 프로필 관리 API
  - name: 스크랩
    description: 모집공고 스크랩 기능 API
  - name: 대학인증
    description: 대학 인증 시스템 API

servers:
  - url: https://teamitaka-backend-zwe2nuc5ga-uc.a.run.app/api
    description: 프로덕션 서버
  - url: http://localhost:3000/api
    description: 로컬 개발 서버

paths:
  # 관리자 관련 엔드포인트
  /admin/login:
    post:
      summary: 관리자 로그인
      description: 관리자가 이메일과 비밀번호를 통해 로그인하여 JWT 토큰을 발급받습니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: 관리자 이메일
                password:
                  type: string
                  description: 관리자 비밀번호
              required:
                - email
                - password
      responses:
        '200':
          description: 로그인 성공, JWT 토큰 반환
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: JWT 토큰
                  message:
                    type: string
                    example: "관리자 로그인 성공"
        '401':
          description: 비밀번호 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: 관리자 계정이 아님
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /admin/certified-users:
    get:
      summary: 인증된 유저 목록 조회
      description: UnivCert API를 통해 인증된 사용자 목록을 조회합니다.
      responses:
        '200':
          description: 인증된 유저 목록 반환
          content:
            application/json:
              schema:
                type: object
                description: UnivCert API 응답 형식에 따름
        '400':
          description: UnivCert API 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /admin/clear-verified-emails:
    delete:
      summary: 인증된 이메일 전체 삭제
      description: 데이터베이스에서 모든 인증된 이메일 기록을 삭제합니다.
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "✅ 모든 인증된 이메일이 삭제되었습니다."
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 지원 관련 엔드포인트
  /applications/{recruitment_id}:
    post:
      summary: 모집공고에 지원하기
      description: 특정 모집공고에 지원합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
          example: "00000000-0000-0000-0000-000000000002"
      responses:
        '201':
          description: 지원 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
    get:
      summary: 지원자 목록 조회
      description: 특정 모집공고의 지원자 목록을 조회합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
          example: "00000000-0000-0000-0000-000000000002"
      responses:
        '200':
          description: 지원자 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Application'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /applications/{application_id}/approve:
    patch:
      summary: 지원 승인
      description: 특정 지원을 승인합니다.
      parameters:
        - in: path
          name: application_id
          required: true
          schema:
            type: string
          description: 지원 ID
          example: "00000000-0000-0000-0000-000000000005"
      responses:
        '200':
          description: 승인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "지원이 승인되었습니다."
                  updatedApplication:
                    $ref: '#/components/schemas/Application'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /applications/{application_id}/reject:
    patch:
      summary: 지원 거절
      description: 특정 지원을 거절합니다.
      parameters:
        - in: path
          name: application_id
          required: true
          schema:
            type: string
          description: 지원 ID
          example: "00000000-0000-0000-0000-000000000005"
      responses:
        '200':
          description: 거절 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "지원이 거절되었습니다."
                  updatedApplication:
                    $ref: '#/components/schemas/Application'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 인증 관련 엔드포인트
  /auth/register:
    post:
      summary: 사용자 회원가입
      description: 새로운 사용자를 등록합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: 사용자 이메일
                  example: "newuser@example.com"
                password:
                  type: string
                  description: 비밀번호
                  example: "password123"
                username:
                  type: string
                  description: 사용자명
                  example: "newuser"
                university:
                  type: string
                  description: 대학교
                  example: "테스트 대학교"
                major:
                  type: string
                  description: 전공
                  example: "컴퓨터공학과"
              required:
                - email
                - password
                - username
            example:
              email: "newuser@example.com"
              password: "password123"
              username: "newuser"
              university: "테스트 대학교"
              major: "컴퓨터공학과"
      responses:
        '201':
          description: 회원가입 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "✅ 회원가입 성공!"
                  user:
                    $ref: '#/components/schemas/User'
        '400':
          description: 입력값 오류 또는 이메일 중복
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /auth/login:
    post:
      summary: 사용자 로그인
      description: 사용자가 로그인하여 JWT 토큰을 발급받습니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  format: email
                  description: 사용자 이메일
                  example: "test@example.com"
                password:
                  type: string
                  description: 비밀번호
                  example: "password"
              required:
                - email
                - password
            example:
              email: "test@example.com"
              password: "password"
      responses:
        '200':
          description: 로그인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "✅ 로그인 성공!"
                  token:
                    type: string
                    description: JWT 토큰
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        '400':
          description: 입력값 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /auth/validate-password:
    post:
      summary: 비밀번호 유효성 검사
      description: 제공된 비밀번호의 유효성을 검사합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                password:
                  type: string
              required:
                - password
      responses:
        '200':
          description: 유효성 검사 결과 반환
          content:
            application/json:
              schema:
                type: object
                description: 비밀번호 유효성 검사 결과
        '400':
          description: 비밀번호 입력 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # 댓글 관련 엔드포인트
  /comment/{recruitment_id}:
    get:
      summary: 모집공고 댓글 조회
      description: 특정 모집공고에 달린 댓글 목록을 조회합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
          example: "00000000-0000-0000-0000-000000000004"
      responses:
        '200':
          description: 댓글 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      example: "00000000-0000-0000-0000-000000000004"
                    content:
                      type: string
                      example: "이것은 테스트 댓글입니다."
                    recruitment_id:
                      type: string
                      example: "00000000-0000-0000-0000-000000000002"
                    user_id:
                      type: string
                      example: "00000000-0000-0000-0000-000000000001"
                    createdAt:
                      type: string
                      format: date-time
                      example: "2025-06-26T13:20:27.000Z"
                    updatedAt:
                      type: string
                      format: date-time
                      example: "2025-06-26T13:20:27.000Z"
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: 댓글 작성
      description: 특정 모집공고에 댓글을 작성합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
          example: "00000000-0000-0000-0000-000000000002"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  description: 댓글 내용
                  example: "새로운 테스트 댓글입니다."
              required:
                - content
            example:
              content: "새로운 테스트 댓글입니다."
      responses:
        '201':
          description: 댓글 작성 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    example: "00000000-0000-0000-0000-000000000008"
                  content:
                    type: string
                    example: "새로운 테스트 댓글입니다."
                  recruitment_id:
                    type: string
                    example: "00000000-0000-0000-0000-000000000002"
                  user_id:
                    type: string
                    example: "00000000-0000-0000-0000-000000000001"
                  createdAt:
                    type: string
                    format: date-time
                    example: "2025-06-26T13:20:27.000Z"
                  updatedAt:
                    type: string
                    format: date-time
                    example: "2025-06-26T13:20:27.000Z"
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 개발용 엔드포인트
  /dev/clear-verified-emails:
    delete:
      summary: 인증된 이메일 전체 삭제 (개발용)
      description: 개발 환경에서 모든 인증된 이메일 기록을 삭제합니다.
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "✅ 모든 인증된 이메일이 삭제되었습니다."
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # 모집공고 초안 관련 엔드포인트
  /drafts/recruitment/draft:
    post:
      summary: 모집공고 임시저장
      description: 모집공고를 임시저장합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RecruitmentDraft'
      responses:
        '201':
          description: 임시저장 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "임시저장되었습니다."
                  draftRecruitment:
                    $ref: '#/components/schemas/RecruitmentDraft'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 팀원 관련 엔드포인트
  /projects/{project_id}/members:
    get:
      summary: 팀원 목록 조회
      description: 특정 프로젝트의 팀원 목록을 조회합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
          example: "00000000-0000-0000-0000-000000000003"
      responses:
        '200':
          description: 팀원 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProjectMember'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: 팀원 추가
      description: 특정 프로젝트에 팀원을 추가합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
          example: "00000000-0000-0000-0000-000000000003"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id:
                  type: string
                  description: 추가할 사용자 ID
                  example: "00000000-0000-0000-0000-000000000001"
                role:
                  type: string
                  description: 팀원 역할 (기본값: "팀원")
                  example: "개발자"
              required:
                - user_id
            example:
              user_id: "00000000-0000-0000-0000-000000000001"
              role: "개발자"
      responses:
        '201':
          description: 팀원 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectMember'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /projects/members/{member_id}:
    put:
      summary: 팀원 역할 수정
      description: 특정 팀원의 역할을 수정합니다.
      parameters:
        - in: path
          name: member_id
          required: true
          schema:
            type: string
          description: 팀원 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                role:
                  type: string
                  description: 수정할 역할
              required:
                - role
      responses:
        '200':
          description: 역할 수정 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "팀원 역할이 수정되었습니다."
                  member:
                    $ref: '#/components/schemas/ProjectMember'
        '404':
          description: 팀원 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
    delete:
      summary: 팀원 삭제
      description: 특정 팀원을 프로젝트에서 삭제합니다.
      parameters:
        - in: path
          name: member_id
          required: true
          schema:
            type: string
          description: 팀원 ID
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "팀원이 삭제되었습니다."
        '404':
          description: 팀원 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 프로필 관련 엔드포인트
  /profile/{user_id}:
    get:
      summary: 사용자 프로필 조회
      description: 특정 사용자의 프로필 정보를 조회합니다.
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: string
          description: 사용자 ID
          example: "00000000-0000-0000-0000-000000000001"
      responses:
        '200':
          description: 프로필 정보 반환
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    type: string
                    example: "00000000-0000-0000-0000-000000000001"
                  username:
                    type: string
                    example: "testuser"
                  university:
                    type: string
                    example: "테스트 대학교"
                  major:
                    type: string
                    example: "컴퓨터공학과"
                  avatar:
                    type: string
                    nullable: true
                    example: null
                  bio:
                    type: string
                    example: "테스트용 사용자입니다."
                  skills:
                    type: string
                    example: "JavaScript, Python, React"
                  portfolio_url:
                    type: string
                    example: "https://github.com/testuser"
        '400':
          description: 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /profile/{user_id}/ratings:
    get:
      summary: 사용자 평점 조회
      description: 특정 사용자의 평점 정보를 조회합니다.
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: string
          description: 사용자 ID
          example: "00000000-0000-0000-0000-000000000001"
      responses:
        '200':
          description: 평점 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Rating'
        '400':
          description: 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /profile/{user_id}/projects:
    get:
      summary: 사용자 참여 프로젝트 조회
      description: 특정 사용자가 참여한 프로젝트 목록을 조회합니다.
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: string
          description: 사용자 ID
          example: "00000000-0000-0000-0000-000000000001"
      responses:
        '200':
          description: 프로젝트 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
        '400':
          description: 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # 프로젝트 관련 엔드포인트
  /projects:
    get:
      summary: 전체 프로젝트 조회
      description: 모든 프로젝트 목록을 조회합니다.
      responses:
        '200':
          description: 프로젝트 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /projects/{project_id}:
    get:
      summary: 특정 프로젝트 조회
      description: 특정 프로젝트의 상세 정보를 조회합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
      responses:
        '200':
          description: 프로젝트 정보 반환
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '404':
          description: 프로젝트 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      summary: 프로젝트 수정
      description: 특정 프로젝트 정보를 수정합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Project'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '404':
          description: 프로젝트 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
    delete:
      summary: 프로젝트 삭제
      description: 특정 프로젝트를 삭제합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "프로젝트가 삭제되었습니다."
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /projects/completed:
    get:
      summary: 완료된 프로젝트 조회
      description: 현재 사용자가 참여한 완료된 프로젝트 목록을 조회합니다.
      responses:
        '200':
          description: 완료된 프로젝트 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 모집공고 관련 엔드포인트
  /recruitments:
    get:
      summary: 전체 모집공고 조회
      description: 모든 모집공고 목록을 조회합니다.
      responses:
        '200':
          description: 모집공고 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Recruitment'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: 모집공고 생성
      description: 새로운 모집공고를 생성합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Recruitment'
      responses:
        '201':
          description: 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Recruitment'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /recruitments/{recruitment_id}:
    get:
      summary: 특정 모집공고 조회
      description: 특정 모집공고의 상세 정보를 조회합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
      responses:
        '200':
          description: 모집공고 정보 반환
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Recruitment'
        '404':
          description: 모집공고 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    put:
      summary: 모집공고 수정
      description: 특정 모집공고를 수정합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Recruitment'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "모집공고가 수정되었습니다."
                  updatedRecruitment:
                    $ref: '#/components/schemas/Recruitment'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
    delete:
      summary: 모집공고 삭제
      description: 특정 모집공고를 삭제합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "모집공고가 삭제되었습니다."
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 리뷰 관련 엔드포인트
  /reviews:
    post:
      summary: 리뷰 생성
      description: 프로젝트에 대한 리뷰를 작성합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Review'
      responses:
        '201':
          description: 리뷰 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Review'
        '400':
          description: 입력값 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /reviews/user/{user_id}:
    get:
      summary: 사용자 리뷰 조회
      description: 특정 사용자에 대한 리뷰 목록을 조회합니다.
      parameters:
        - in: path
          name: user_id
          required: true
          schema:
            type: string
          description: 사용자 ID
      responses:
        '200':
          description: 리뷰 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'
        '400':
          description: 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /reviews/project/{project_id}:
    get:
      summary: 프로젝트 리뷰 조회
      description: 특정 프로젝트에 대한 리뷰 목록을 조회합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
      responses:
        '200':
          description: 리뷰 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Review'
        '400':
          description: 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /reviews/{review_id}:
    delete:
      summary: 리뷰 삭제
      description: 특정 리뷰를 삭제합니다.
      parameters:
        - in: path
          name: review_id
          required: true
          schema:
            type: string
          description: 리뷰 ID
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Review deleted"
        '404':
          description: 리뷰 없음 또는 권한 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '400':
          description: 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 스크랩 관련 엔드포인트
  /scraps/recruitments:
    get:
      summary: 스크랩한 모집공고 조회
      description: 사용자가 스크랩한 모집공고 목록을 조회합니다.
      responses:
        '200':
          description: 스크랩 목록 반환
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Recruitment'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /recruitment/{recruitment_id}/scrap:
    put:
      summary: 모집공고 스크랩 토글
      description: 모집공고를 스크랩하거나 스크랩을 취소합니다.
      parameters:
        - in: path
          name: recruitment_id
          required: true
          schema:
            type: string
          description: 모집공고 ID
      responses:
        '200':
          description: 스크랩 상태 변경 성공
          content:
            application/json:
              schema:
                type: string
                description: 스크랩 상태 메시지
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 검색 관련 엔드포인트
  /search:
    get:
      summary: 검색
      description: 키워드를 기반으로 모집공고 등을 검색합니다.
      parameters:
        - in: query
          name: q
          required: true
          schema:
            type: string
          description: 검색 키워드
      responses:
        '200':
          description: 검색 결과 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Recruitment'
        '400':
          description: 검색어 누락
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # 타임라인 관련 엔드포인트
  /projects/{project_id}/timeline:
    get:
      summary: 타임라인 조회
      description: 특정 프로젝트의 타임라인을 조회합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
          example: "00000000-0000-0000-0000-000000000003"
      responses:
        '200':
          description: 타임라인 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Timeline'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: 타임라인 이벤트 추가
      description: 특정 프로젝트에 타임라인 이벤트를 추가합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                event:
                  type: string
                  description: 이벤트 내용
                date:
                  type: string
                  format: date
                  description: 이벤트 날짜
              required:
                - event
                - date
      responses:
        '201':
          description: 이벤트 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timeline'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /projects/{project_id}/timeline/{event_id}:
    put:
      summary: 타임라인 이벤트 수정
      description: 특정 타임라인 이벤트를 수정합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
        - in: path
          name: event_id
          required: true
          schema:
            type: string
          description: 이벤트 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                event:
                  type: string
                  description: 이벤트 내용
                date:
                  type: string
                  format: date
                  description: 이벤트 날짜
              required:
                - event
                - date
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Timeline'
        '404':
          description: 이벤트 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
    delete:
      summary: 타임라인 이벤트 삭제
      description: 특정 타임라인 이벤트를 삭제합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
        - in: path
          name: event_id
          required: true
          schema:
            type: string
          description: 이벤트 ID
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "타임라인 이벤트가 삭제되었습니다."
        '404':
          description: 이벤트 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 할 일 관련 엔드포인트
  /projects/{project_id}/todo:
    get:
      summary: 프로젝트 할 일 목록 조회
      description: 특정 프로젝트의 할 일 목록을 조회합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
          example: "00000000-0000-0000-0000-000000000003"
      responses:
        '200':
          description: 할 일 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Todo'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: 할 일 추가
      description: 특정 프로젝트에 할 일을 추가합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
          example: "00000000-0000-0000-0000-000000000003"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  description: 할 일 내용
                  example: "새로운 테스트 할 일입니다."
                is_completed:
                  type: boolean
                  description: 완료 여부 (기본값: false)
                  example: false
              required:
                - content
            example:
              content: "새로운 테스트 할 일입니다."
              is_completed: false
      responses:
        '201':
          description: 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Todo'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
  /projects/{project_id}/todo/{todo_id}:
    put:
      summary: 할 일 수정
      description: 특정 할 일의 상태를 수정합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
        - in: path
          name: todo_id
          required: true
          schema:
            type: string
          description: 할 일 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                is_completed:
                  type: boolean
                  description: 완료 여부
              required:
                - is_completed
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Todo'
        '404':
          description: 할 일 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
    delete:
      summary: 할 일 삭제
      description: 특정 할 일을 삭제합니다.
      parameters:
        - in: path
          name: project_id
          required: true
          schema:
            type: string
          description: 프로젝트 ID
        - in: path
          name: todo_id
          required: true
          schema:
            type: string
          description: 할 일 ID
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "할 일이 삭제되었습니다."
        '404':
          description: 할 일 없음
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []

  # 대학 인증 관련 엔드포인트
  /univ/send-otp:
    post:
      summary: OTP 전송
      description: 대학 이메일 인증을 위한 OTP를 전송합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: 대학 이메일
              required:
                - email
      responses:
        '200':
          description: OTP 전송 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "OTP 전송 완료"
        '400':
          description: 입력 오류 또는 지원되지 않는 학교
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /univ/verify-otp:
    post:
      summary: OTP 검증
      description: 전송된 OTP 코드를 검증합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: 대학 이메일
                code:
                  type: string
                  description: OTP 코드
              required:
                - email
                - code
      responses:
        '200':
          description: 인증 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "인증 성공"
                  univName:
                    type: string
                    description: 대학 이름
                  certified_email:
                    type: string
                    description: 인증된 이메일
                  certified_date:
                    type: string
                    format: date-time
                    description: 인증 날짜
        '400':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # 사용자 관련 엔드포인트
  /user:
    get:
      summary: 전체 사용자 조회
      description: 모든 사용자 목록을 조회합니다.
      responses:
        '200':
          description: 사용자 목록 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    post:
      summary: 사용자 생성
      description: 새로운 사용자를 생성합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserRegister'
      responses:
        '201':
          description: 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '500':
          description: 서버 오류
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

# 컴포넌트 정의
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT 토큰을 사용한 인증. 로그인 후 받은 토큰을 Authorization 헤더에 포함시켜 주세요.
  
  schemas:
    # 공통 응답 스키마
    Error:
      type: object
      properties:
        message:
          type: string
          description: 오류 메시지
        error:
          type: string
          description: 상세 오류 정보
        statusCode:
          type: integer
          description: HTTP 상태 코드
      required:
        - message

    Success:
      type: object
      properties:
        message:
          type: string
          description: 성공 메시지
        data:
          type: object
          description: 응답 데이터
      required:
        - message

    PaginatedResponse:
      type: object
      properties:
        data:
          type: array
          description: 데이터 배열
        pagination:
          type: object
          properties:
            page:
              type: integer
              description: 현재 페이지
            limit:
              type: integer
              description: 페이지당 항목 수
            total:
              type: integer
              description: 전체 항목 수
            totalPages:
              type: integer
              description: 전체 페이지 수
          required:
            - page
            - limit
            - total
            - totalPages

    # 인증 관련 스키마
    LoginRequest:
      type: object
      properties:
        email:
          type: string
          format: email
          description: 사용자 이메일
        password:
          type: string
          description: 비밀번호
      required:
        - email
        - password

    LoginResponse:
      type: object
      properties:
        token:
          type: string
          description: JWT 토큰
        user:
          $ref: '#/components/schemas/User'
        message:
          type: string
          description: 성공 메시지
      required:
        - token
        - user

    # 사용자 관련 스키마
    User:
      type: object
      properties:
        id:
          type: integer
          description: 사용자 ID
        email:
          type: string
          format: email
          description: 사용자 이메일
        name:
          type: string
          description: 사용자 이름
        univName:
          type: string
          description: 대학 이름
        certified_email:
          type: string
          description: 인증된 이메일
        certified_date:
          type: string
          format: date-time
          description: 인증 날짜
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - email
        - name

    UserRegister:
      type: object
      properties:
        email:
          type: string
          format: email
          description: 사용자 이메일
        password:
          type: string
          description: 비밀번호
        name:
          type: string
          description: 사용자 이름
      required:
        - email
        - password
        - name

    # 프로젝트 관련 스키마
    Project:
      type: object
      properties:
        id:
          type: integer
          description: 프로젝트 ID
        title:
          type: string
          description: 프로젝트 제목
        description:
          type: string
          description: 프로젝트 설명
        status:
          type: string
          enum: [active, completed, paused]
          description: 프로젝트 상태
        startDate:
          type: string
          format: date
          description: 시작 날짜
        endDate:
          type: string
          format: date
          description: 종료 날짜
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - title
        - description

    # 지원 관련 스키마
    Application:
      type: object
      properties:
        id:
          type: integer
          description: 지원 ID
        recruitment_id:
          type: integer
          description: 모집공고 ID
        user_id:
          type: integer
          description: 지원자 ID
        status:
          type: string
          enum: [pending, approved, rejected]
          description: 지원 상태
        message:
          type: string
          description: 지원 메시지
        createdAt:
          type: string
          format: date-time
          description: 지원 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - recruitment_id
        - user_id
        - status

    # 모집공고 관련 스키마
    Recruitment:
      type: object
      properties:
        id:
          type: integer
          description: 모집공고 ID
        title:
          type: string
          description: 모집공고 제목
        content:
          type: string
          description: 모집공고 내용
        author_id:
          type: integer
          description: 작성자 ID
        status:
          type: string
          enum: [active, closed, draft]
          description: 모집공고 상태
        deadline:
          type: string
          format: date-time
          description: 마감일
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - title
        - content
        - author_id

    # 리뷰 관련 스키마
    Review:
      type: object
      properties:
        id:
          type: integer
          description: 리뷰 ID
        reviewer_id:
          type: integer
          description: 리뷰어 ID
        reviewee_id:
          type: integer
          description: 피리뷰어 ID
        project_id:
          type: integer
          description: 프로젝트 ID
        ability_rating:
          type: integer
          minimum: 1
          maximum: 5
          description: 능력 평점
        effort_rating:
          type: integer
          minimum: 1
          maximum: 5
          description: 노력 평점
        dedication_rating:
          type: integer
          minimum: 1
          maximum: 5
          description: 헌신 평점
        communication_rating:
          type: integer
          minimum: 1
          maximum: 5
          description: 소통 평점
        reflection_rating:
          type: integer
          minimum: 1
          maximum: 5
          description: 성찰 평점
        comment:
          type: string
          description: 리뷰 코멘트
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - reviewer_id
        - reviewee_id
        - project_id

    # 모집공고 초안 스키마
    RecruitmentDraft:
      type: object
      properties:
        id:
          type: integer
          description: 초안 ID
        title:
          type: string
          description: 모집공고 제목
        content:
          type: string
          description: 모집공고 내용
        author_id:
          type: integer
          description: 작성자 ID
        status:
          type: string
          enum: [draft]
          description: 초안 상태
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - title
        - content
        - author_id

    # 댓글 스키마
    Comment:
      type: object
      properties:
        id:
          type: integer
          description: 댓글 ID
        content:
          type: string
          description: 댓글 내용
        recruitment_id:
          type: integer
          description: 모집공고 ID
        user_id:
          type: integer
          description: 작성자 ID
        createdAt:
          type: string
          format: date-time
          description: 작성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - content
        - recruitment_id
        - user_id

    # 프로젝트 멤버 스키마
    ProjectMember:
      type: object
      properties:
        id:
          type: integer
          description: 멤버 ID
        project_id:
          type: integer
          description: 프로젝트 ID
        user_id:
          type: integer
          description: 사용자 ID
        role:
          type: string
          description: 팀원 역할
        createdAt:
          type: string
          format: date-time
          description: 추가 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - project_id
        - user_id

    # 평점 스키마
    Rating:
      type: object
      properties:
        id:
          type: integer
          description: 평점 ID
        user_id:
          type: integer
          description: 사용자 ID
        average_rating:
          type: number
          format: float
          description: 평균 평점
        total_reviews:
          type: integer
          description: 총 리뷰 수
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - user_id

    # 타임라인 스키마
    Timeline:
      type: object
      properties:
        id:
          type: integer
          description: 이벤트 ID
        project_id:
          type: integer
          description: 프로젝트 ID
        event:
          type: string
          description: 이벤트 내용
        date:
          type: string
          format: date
          description: 이벤트 날짜
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - project_id
        - event
        - date

    # 할 일 스키마
    Todo:
      type: object
      properties:
        id:
          type: integer
          description: 할 일 ID
        project_id:
          type: integer
          description: 프로젝트 ID
        content:
          type: string
          description: 할 일 내용
        is_completed:
          type: boolean
          description: 완료 여부
        createdAt:
          type: string
          format: date-time
          description: 생성 날짜
        updatedAt:
          type: string
          format: date-time
          description: 수정 날짜
      required:
        - id
        - project_id
        - content